import{b as v,r,u as f,a as N,R as p,j as s}from"./index-CwMurYek.js";const S={checkHealth:async()=>(await v.get("/health")).data},L=e=>e&&typeof e=="object"&&"message"in e?e.message:"An unexpected error occurred";function k(e,t={}){const{immediate:a=!1,onSuccess:l,onError:c}=t,[h,i]=r.useState(null),[u,n]=r.useState(a),[b,x]=r.useState(null),o=r.useCallback(async(...j)=>{n(!0),x(null);try{const d=await e(...j);i(d),l?.(d)}catch(d){const g={message:L(d),status:d?.status,errors:d?.errors};x(g),c?.(g)}finally{n(!1)}},[e,l,c]),m=r.useCallback(()=>{i(null),x(null),n(!1)},[]);return r.useEffect(()=>{a&&o()},[a,o]),{data:h,loading:u,error:b,execute:o,reset:m}}const E=()=>{const e=f(),[t,a]=r.useState(null),[l,c]=r.useState(!0),{data:h,loading:i,error:u,execute:n}=k(S.checkHealth);return r.useEffect(()=>{if(!N.isAuthenticated()){e(p.LOGIN);return}(async()=>{try{const m=await N.getProfile();a(m)}catch(m){console.error("Failed to load user profile:",m);const j=localStorage.getItem("user");j&&a(JSON.parse(j))}})(),n()},[e,n]),{user:t,sidebarOpen:l,healthData:h,healthLoading:i,healthError:u,handleLogout:()=>{N.logout(),e(p.LOGIN)},toggleSidebar:()=>{c(o=>!o)},checkHealth:n}},D=()=>{const{user:e,sidebarOpen:t,healthData:a,healthLoading:l,healthError:c,handleLogout:h,toggleSidebar:i,checkHealth:u}=E();return s.jsxs("div",{className:"dashboard-container",children:[s.jsxs("aside",{className:`dashboard-sidebar ${t?"open":"closed"}`,children:[s.jsxs("div",{className:"sidebar-header",children:[s.jsx("h2",{className:"sidebar-logo",children:"BooyahX Admin"}),s.jsx("button",{className:"sidebar-toggle",onClick:i,"aria-label":"Toggle sidebar",children:t?"‚Üê":"‚Üí"})]}),s.jsxs("nav",{className:"sidebar-nav",children:[s.jsxs("a",{href:"#dashboard",className:"nav-item active",children:[s.jsx("span",{className:"nav-icon",children:"üìä"}),t&&s.jsx("span",{className:"nav-text",children:"Dashboard"})]}),s.jsxs("a",{href:"#health",className:"nav-item",children:[s.jsx("span",{className:"nav-icon",children:"‚ù§Ô∏è"}),t&&s.jsx("span",{className:"nav-text",children:"Health"})]})]}),s.jsxs("div",{className:"sidebar-footer",children:[t&&e&&s.jsxs("div",{className:"user-info",children:[s.jsx("div",{className:"user-email",children:e.email}),e.name&&s.jsx("div",{className:"user-name",children:e.name})]}),s.jsx("button",{className:"logout-button",onClick:h,children:t?"Logout":"üö™"})]})]}),s.jsxs("main",{className:"dashboard-main",children:[s.jsxs("header",{className:"dashboard-header",children:[s.jsx("h1",{children:"Dashboard"}),s.jsx("div",{className:"header-actions",children:s.jsx("button",{className:"refresh-button",onClick:u,disabled:l,children:l?"Refreshing...":"üîÑ Refresh"})})]}),s.jsxs("div",{className:"dashboard-content",children:[s.jsxs("div",{className:"dashboard-card",children:[s.jsx("h2",{className:"card-title",children:"API Health Status"}),l&&s.jsx("div",{className:"loading",children:"Loading health status..."}),c&&s.jsxs("div",{className:"error",children:[s.jsx("strong",{children:"Error:"})," ",c.message]}),a&&s.jsxs("div",{className:"health-status",children:[s.jsxs("div",{className:"status-item",children:[s.jsx("span",{className:"status-label",children:"Status:"}),s.jsx("span",{className:`status-value ${a.status==="ok"?"success":"error"}`,children:a.status})]}),a.timestamp&&s.jsxs("div",{className:"status-item",children:[s.jsx("span",{className:"status-label",children:"Last Check:"}),s.jsx("span",{className:"status-value",children:new Date(a.timestamp).toLocaleString()})]}),a.uptime!==void 0&&s.jsxs("div",{className:"status-item",children:[s.jsx("span",{className:"status-label",children:"Uptime:"}),s.jsxs("span",{className:"status-value",children:[Math.floor(a.uptime/60)," minutes"]})]})]})]}),s.jsxs("div",{className:"dashboard-card",children:[s.jsx("h2",{className:"card-title",children:"Welcome"}),s.jsx("p",{className:"card-content",children:e?`Welcome back, ${e.name||e.email}!`:"Welcome to BooyahX Admin Dashboard"}),s.jsx("p",{className:"card-content-secondary",children:"Manage your application from this centralized dashboard."})]})]})]})]})};export{D as default};
